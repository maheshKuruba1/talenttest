package routines;

import java.util.Random;

public class MSFDataMasking {
	static String ENV = "DEV";
	static String newInt = "1234567890";
	static String newChar = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
	static int maxInt = 9;
	static int maxChar = 51;
	static Random rand = new Random();
	static int pos;
	static char tempChar;
	
   public static String maskEmail(String env, String email) 
    {
	 
    	if(ENV.equals(env)) 
    	{
	    	if (email == null) 
	    	{
	    		return "";
	    	}
	    	else if (email.indexOf("@") > 0) 
	    	{
	    		StringBuilder newMail = new StringBuilder(email);	    		
	    		for (int i=0; i < newMail.length(); i++)
	    		{
	    			if (email.charAt(i) == '@' || email.charAt(i) == '.')
	    			{
	    				
	    			}
	    			else
	    			{
	    				newMail.setCharAt(i, '*');
	    			}
	    		}
	    		return newMail.toString();
	    	}
    	}
    	return email;
    }

    public static String maskPhone(String env, String phone) 
    {
    	
    	if(ENV.equals(env)) 
    	{
    		if (phone == null)
    		{
        		return "";
    		}
    		else 
    		{
    			StringBuilder newPhone = new StringBuilder(phone);
    			for(int i = 0; i < newPhone.length(); i++)
    			{
    				if(newPhone.charAt(i) == '+' || newPhone.charAt(i) == ' ') 
    				{
    					
    				}
    				else
    				{
    					pos = rand.nextInt(maxInt);
        				tempChar = newInt.charAt(pos);
        				newPhone.setCharAt(i, tempChar);
    				}
    			}
    			return newPhone.toString();
    		}
    	}
    	if (phone != null) {
    		phone = phone.replaceAll("[\\uD83D\\uFFFD\\uFE0F\\u203C\\u3010\\u3011\\u300A\\u166D\\u200C\\u202A\\u202C\\u2049\\u20E3\\u300B\\u300C\\u3030\\u065F\\u0099\\u0F3A\\u0F3B\\uF610\\uFFFC]", "");
    	}
    	return phone;
    }
    
    public static String maskBankAccount(String env, String account)
    {
    	if(ENV.equals(env)) 
    	{
    		if(account == null)
    		{
    			return "";
    		}
    		else
    		{
    			DataMasking.maskCreditCardNumber(account, newInt);
    		}
    	}
    	return account;
    }
    
    public static String maskData(String env, String data)
    {
    	if(ENV.equals(env)) 
    	{
    		if(data == null) 
    		{
    			return "";
    		}
    		else
    		{               
    			DataMasking.createRandomString(data.length(), newChar);
    		}
    	}
    	return data;
    }

}
